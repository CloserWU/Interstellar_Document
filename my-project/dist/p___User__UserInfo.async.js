(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"/UVM":function(e,a,t){"use strict";t.r(a);t("IzEo");var r,n,s,i,o,c,l,p=t("bx4M"),u=(t("5NDa"),t("5rEg")),m=t("lwsE"),g=t.n(m),v=t("W8MJ"),d=t.n(v),f=t("a1gu"),h=t.n(f),b=t("Nsbk"),y=t.n(b),E=t("7W2i"),O=t.n(E),w=(t("DZo9"),t("8z0m")),M=(t("+L6B"),t("2/Rp")),k=(t("OaEy"),t("2fM7")),_=(t("y8nQ"),t("Vl3Y")),j=t("q1tI"),C=t.n(j),N=t("LLXN"),I=t("MuoO"),V=t("zHco"),q=t("q8us"),P=t.n(q),x=(t("T2oS"),t("W9HT")),L=t("0i7H"),U=t.n(L),D=k["a"].Option,F={label:"",key:""},S=(r=Object(I["connect"])(function(e){var a=e.geographic1,t=a.province,r=a.isLoading,n=a.city;return{province:t,city:n,isLoading:r}}),r((s=function(e){function a(){var e,t;g()(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=h()(this,(e=y()(a)).call.apply(e,[this].concat(n))),t.componentDidMount=function(){var e=t.props.dispatch;e({type:"geographic1/fetchProvince"})},t.getCityOption=function(){var e=t.props.city;return t.getOption(e)},t.getOption=function(e){return!e||e.length<1?C.a.createElement(D,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return C.a.createElement(D,{key:e.id,value:e.id},e.name)})},t.selectProvinceItem=function(e){var a=t.props,r=a.dispatch,n=a.onChange;r({type:"geographic1/fetchCity",payload:e.key}),n({province:e,city:F})},t.selectCityItem=function(e){var a=t.props,r=a.value,n=a.onChange;n({province:r.province,city:e})},t}return O()(a,e),d()(a,[{key:"componentDidUpdate",value:function(e){var a=this.props,t=a.dispatch,r=a.value;!e.value&&r&&r.province&&t({type:"geographic1/fetchCity",payload:r.province.key})}},{key:"getProvinceOption",value:function(){var e=this.props.province;return this.getOption(e)}},{key:"conversionObject",value:function(){var e=this.props.value;if(!e)return{province:F,city:F};var a=e.province,t=e.city;return{province:a||F,city:t||F}}},{key:"render",value:function(){var e=this.conversionObject(),a=e.province,t=e.city,r=this.props.isLoading;return C.a.createElement(x["a"],{spinning:r,wrapperClassName:U.a.row},C.a.createElement(k["a"],{className:U.a.item,value:a,labelInValue:!0,showSearch:!0,onSelect:this.selectProvinceItem},this.getProvinceOption()),C.a.createElement(k["a"],{className:U.a.item,value:t,labelInValue:!0,showSearch:!0,onSelect:this.selectCityItem},this.getCityOption()))}}]),a}(j["PureComponent"]),n=s))||n),A=S,W=t("G/Wo"),z=t.n(W),R=function(e){function a(){return g()(this,a),h()(this,y()(a).apply(this,arguments))}return O()(a,e),d()(a,[{key:"render",value:function(){var e=this.props,a=e.value,t=e.onChange,r=["",""];return a&&(r=a.split("-")),C.a.createElement(j["Fragment"],null,C.a.createElement(u["a"],{className:z.a.area_code,value:r[0],onChange:function(e){t("".concat(e.target.value,"-").concat(r[1]))}}),C.a.createElement(u["a"],{className:z.a.phone_number,onChange:function(e){t("".concat(r[0],"-").concat(e.target.value))},value:r[1]}))}}]),a}(j["PureComponent"]),B=R,H=_["a"].Item,J=k["a"].Option,T=function(e){var a=e.avatar;return C.a.createElement(j["Fragment"],null,C.a.createElement("div",{className:P.a.avatar_title},C.a.createElement(N["FormattedMessage"],{id:"app.settings.basic.avatar",defaultMessage:"Avatar"})),C.a.createElement("div",{className:P.a.avatar},C.a.createElement("img",{src:a,alt:"avatar"})),C.a.createElement(w["a"],{fileList:[]},C.a.createElement("div",{className:P.a.button_view},C.a.createElement(M["a"],{icon:"upload"},C.a.createElement(N["FormattedMessage"],{id:"app.settings.basic.change-avatar",defaultMessage:"Change avatar"})))))},G=function(e,a,t){var r=a.province,n=a.city;r.key||t("Please input your province!"),n.key||t("Please input your city!"),t()},Q=function(e,a,t){var r=a.split("-");r[0]||t("Please input your area code!"),r[1]||t("Please input your phone number!"),t()},X=(i=Object(I["connect"])(function(e){var a=e.user;return{currentUser:a.currentUser}}),o=_["a"].create(),i(c=o((l=function(e){function a(){var e,t;g()(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=h()(this,(e=y()(a)).call.apply(e,[this].concat(n))),t.setBaseInfo=function(){var e=t.props,a=e.currentUser,r=e.form;Object.keys(r.getFieldsValue()).forEach(function(e){var t={};t[e]=a[e]||null,r.setFieldsValue(t)})},t.getViewDom=function(e){t.view=e},t}return O()(a,e),d()(a,[{key:"componentDidMount",value:function(){this.setBaseInfo()}},{key:"getAvatarURL",value:function(){var e=this.props.currentUser;if(e.avatar)return e.avatar;var a="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png";return a}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return C.a.createElement(V["a"],{title:"\u4e2a\u4eba\u4e2d\u5fc3\u9875"},C.a.createElement(p["a"],{bordered:!1},C.a.createElement("div",{className:P.a.baseView,ref:this.getViewDom},C.a.createElement("div",{className:P.a.left},C.a.createElement(_["a"],{layout:"vertical",onSubmit:this.handleSubmit,hideRequiredMark:!0},C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.email"})},e("email",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.email-message"},{})}]})(C.a.createElement(u["a"],null))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.nickname"})},e("name",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.nickname-message"},{})}]})(C.a.createElement(u["a"],null))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.profile"})},e("profile",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.profile-message"},{})}]})(C.a.createElement(u["a"].TextArea,{placeholder:Object(N["formatMessage"])({id:"app.settings.basic.profile-placeholder"}),rows:4}))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.country"})},e("country",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.country-message"},{})}]})(C.a.createElement(k["a"],{style:{maxWidth:220}},C.a.createElement(J,{value:"China"},"\u4e2d\u56fd")))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.geographic"})},e("geographic",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.geographic-message"},{})},{validator:G}]})(C.a.createElement(A,null))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.address"})},e("address",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.address-message"},{})}]})(C.a.createElement(u["a"],null))),C.a.createElement(H,{label:Object(N["formatMessage"])({id:"app.settings.basic.phone"})},e("phone",{rules:[{required:!0,message:Object(N["formatMessage"])({id:"app.settings.basic.phone-message"},{})},{validator:Q}]})(C.a.createElement(B,null))),C.a.createElement(M["a"],{type:"primary"},C.a.createElement(N["FormattedMessage"],{id:"app.settings.basic.update",defaultMessage:"Update Information"})))),C.a.createElement("div",{className:P.a.right},C.a.createElement(T,{avatar:this.getAvatarURL()})))))}}]),a}(j["Component"]),c=l))||c)||c);a["default"]=X},"0i7H":function(e,a,t){e.exports={row:"antd-pro-pages-_-user-geographic-view-row",item:"antd-pro-pages-_-user-geographic-view-item"}},"G/Wo":function(e,a,t){e.exports={area_code:"antd-pro-pages-_-user-phone-view-area_code",phone_number:"antd-pro-pages-_-user-phone-view-phone_number"}},q8us:function(e,a,t){e.exports={baseView:"antd-pro-pages-_-user-user-info-baseView",left:"antd-pro-pages-_-user-user-info-left",right:"antd-pro-pages-_-user-user-info-right",avatar_title:"antd-pro-pages-_-user-user-info-avatar_title",avatar:"antd-pro-pages-_-user-user-info-avatar",button_view:"antd-pro-pages-_-user-user-info-button_view"}}}]);